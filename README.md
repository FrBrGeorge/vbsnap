# Shell-сценарии для рабботы с VirtualBox
* `vbsnap` — для быстрого создания клона
* `vbconnect` — для подключения TCP/COM (по имени или по номеру порта)
* `vbintnets` — какие внутренние сети используются в виртуалках
* `sethostname` (для гостевой системы) — установка имени хоста по содержимому NVRAM
* `autonet` (для гостевой системы) — автоматическая настройка сетевых интерфейсов по по содержимому NVRAM
* `report` (для гостевой системы) — создание отчёта по работе в командной строке (для домашнего задания)
* `.bashrc` и `.bash_profile` (для гостевой системы) — немного xterm-магии

## Подробнее
`vbsnap` — для быстрого создания клона
* Создаёт снапшот с именем `vbsnap` базовой машины, а уж из него делает клоны
  * Клон создаётся в той же группе, что и базовая машина
    * Например, наш образ — в группе `LinuxNetwork2024`
* Параметры: `vbsnap base clone [port] [intnet1 intnet2 intnet3]`
  * `base` — ID или имя базовой машины
  * `clone` — имя клона
  * `port` — порт для проброса TCP/COM
    * Если не указать, подберётся автоматически (на 1 больше максимального номера уже используемых портов)
  * `intnetN` — к какой сети типа `intnet` подключать сетевой адаптер `ethN`
    * Адаптер `eth0` всегда подключён к «сети `NAT`» (для выхода в интернет)
  * Пример: `vbsnap ALT_minimal router intnet deep`
  * Без параметров — выводит список машин (`VBoxManage list vms`)
  * С одним параметром — базовым образом — выводит список образов в той же группе, что и базовый
    * Пример: `vbsnap ALT_minimal`
  * Если второй параметр — `'ERASE!'`, удаляет **все образы из группы**, кроме базового
Дополнительно при клонировании информация о `hostname` и подключённых сетях заносится в поля эмулятора NVRAM `DmiSystemVendor` и `DmiSystemSKU` соответственно.

`vbconnect` — для подключения TCP/COM (по имени или по номеру порта)
* С параметром «`-`» выводит список ''всех'' машин, у которых есть настроенный TCP/COM проброс
* Без параметров выводит список запущенных машин, у которых есть настроенный TCP/COM проброс
* С параметром `'STOP!'` останавливает все запущенные машины

`vbintnets` — какие внутренние сети используются
* без параметров — запущенными виртуалками
* с параметром `vms` — всеми виртуалками

`sethostname` (для гостевой системы) — установка имени хоста по содержимому NVRAM
 Устанавливает `/etc/hostname` + HOSTNAME в `/etc/sysconfig/network` и разлогинивается (чтобы в подсказке отразился новый HOSTNAME)
* Без параметров — лезет в NVRAM.Manufacturer с помощью `dmidecode`
* С одним параметром — использует его в качестве `HOSTNAME`
* (остальные параметры отладочные)

`autonet` (для гостевой системы) — автоматическая настройка сетевых интерфейсов по по содержимому NVRAM
* Лезет в NVRAM.SKU Number с помощью `dmidecode`
* Формат записи: `Port<ПОРТ>[.<СЕТЬ1>[.<СЕТЬ2>…]]`
* Формат IP-адреса для `<СЕТИ>`: `10.A.0.N`, где
  * `A` — алфавитный порядок первой буквы в имени сети,
  * `N` — остаток отделения `<ПОРТ>`-а на 100
* Например, `port2301.intnet` приводит к настройке интерфейса `eth1` в `10.0.9.1/24`

Дополнительно `autonet` включает поддержку маршутизации (`sysctl net.ipv4.ip_forward=1`)
